{
  "query": "\n-- Criar tabela inventario\nCREATE TABLE IF NOT EXISTS inventario (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    personagem_id UUID NOT NULL REFERENCES personagens(id) ON DELETE CASCADE,\n    nome VARCHAR(255) NOT NULL,\n    quantidade INTEGER NOT NULL DEFAULT 1,\n    descricao TEXT,\n    peso DECIMAL(10, 2) NOT NULL DEFAULT 0,\n    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    atualizado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Criar tabela anotacoes\nCREATE TABLE IF NOT EXISTS anotacoes (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    personagem_id UUID NOT NULL REFERENCES personagens(id) ON DELETE CASCADE,\n    titulo VARCHAR(255) NOT NULL,\n    descricao TEXT,\n    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    atualizado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Adicionar campo nivel nas tabelas existentes\nALTER TABLE magias ADD COLUMN IF NOT EXISTS nivel INTEGER DEFAULT 1;\nALTER TABLE habilidades ADD COLUMN IF NOT EXISTS nivel INTEGER DEFAULT 1;\nALTER TABLE conhecimentos ADD COLUMN IF NOT EXISTS nivel INTEGER DEFAULT 1;\n\n-- Remover campo nivel_requerido (se existir)\nALTER TABLE magias DROP COLUMN IF EXISTS nivel_requerido;\nALTER TABLE habilidades DROP COLUMN IF EXISTS nivel_requerido;\nALTER TABLE conhecimentos DROP COLUMN IF EXISTS nivel_requerido;\n\n-- Criar índices para melhor performance\nCREATE INDEX IF NOT EXISTS idx_inventario_personagem ON inventario(personagem_id);\nCREATE INDEX IF NOT EXISTS idx_anotacoes_personagem ON anotacoes(personagem_id);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4R3EF9y6tKaJhkd.root --database HxVoSsB4DgYDF29sDxEuNK --execute \n-- Criar tabela inventario\nCREATE TABLE IF NOT EXISTS inventario (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    personagem_id UUID NOT NULL REFERENCES personagens(id) ON DELETE CASCADE,\n    nome VARCHAR(255) NOT NULL,\n    quantidade INTEGER NOT NULL DEFAULT 1,\n    descricao TEXT,\n    peso DECIMAL(10, 2) NOT NULL DEFAULT 0,\n    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    atualizado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Criar tabela anotacoes\nCREATE TABLE IF NOT EXISTS anotacoes (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    personagem_id UUID NOT NULL REFERENCES personagens(id) ON DELETE CASCADE,\n    titulo VARCHAR(255) NOT NULL,\n    descricao TEXT,\n    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    atualizado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Adicionar campo nivel nas tabelas existentes\nALTER TABLE magias ADD COLUMN IF NOT EXISTS nivel INTEGER DEFAULT 1;\nALTER TABLE habilidades ADD COLUMN IF NOT EXISTS nivel INTEGER DEFAULT 1;\nALTER TABLE conhecimentos ADD COLUMN IF NOT EXISTS nivel INTEGER DEFAULT 1;\n\n-- Remover campo nivel_requerido (se existir)\nALTER TABLE magias DROP COLUMN IF EXISTS nivel_requerido;\nALTER TABLE habilidades DROP COLUMN IF EXISTS nivel_requerido;\nALTER TABLE conhecimentos DROP COLUMN IF EXISTS nivel_requerido;\n\n-- Criar índices para melhor performance\nCREATE INDEX IF NOT EXISTS idx_inventario_personagem ON inventario(personagem_id);\nCREATE INDEX IF NOT EXISTS idx_anotacoes_personagem ON anotacoes(personagem_id);\n",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 3: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 2 column 12 near \"UUID PRIMARY KEY DEFAULT gen_random_uuid(),",
    "    personagem_id UUID NOT NULL REFERENCES personagens(id) ON DELETE CASCADE,",
    "    nome VARCHAR(255) NOT NULL,",
    "    quantidade INTEGER NOT NULL DEFAULT 1,",
    "    descricao TEXT,",
    "    peso DECIMAL(10, 2) NOT NULL DEFAULT 0,",
    "    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP,",
    "    atualizado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
    ")"
  ]
}